<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.1/leaflet.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-gpx/1.4.0/gpx.min.js"></script>

<div class="container">
    <div class="row align-items-center">

        <div class="col-md-6 col-md-offset-3 loginBox">
            <div class="row">
                <h3>{{formTitle}}</h3>
            </div>
            <div class="row mb-5">

                <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">

                    <div class="mb-3 form-group">
                        <label for="startDate">Nombre de la carrera</label>
                        <input type="text" id="raceName" formControlName="day" class="form-control">
                    </div>

                    <div class="mb-3 form-group">
                        <label for="gpx">Archivo GPX de la carrera</label>
                        <input id="gpxfile" class="form-control" type="file" accept=".gpx"
                            (change)="upload($any($event.target).files)" />
                    </div>

                    <div class="mb-3 form-group">
                        <label for="startDate">Fecha de la carrera</label>
                        <input min={{this.minDate}} max={{this.maxDate}} type="date" id="raceDay" formControlName="day"
                            class="form-control">
                    </div>

                    <div class="mb-3 form-group">
                        <label for="activityTypeSelect">Tipo de actividad</label>
                        <select id="activityTypeSelect" class="form-select" formControlName="activityType">
                            <option *ngFor="let act of activityTypes" [value]="activityTypeEnum[act]">
                                {{act}}
                            </option>
                        </select>
                    </div>

                    <div class="mb-3 form-group">
                        <label for="activityTypeSelect">Categor√≠as disponibles</label>
                        <select id="activityTypeSelect" class="form-select" formControlName="activityType">
                            <option *ngFor="let cat of categoryTypes" [value]="raceCategoryEnum[cat]">
                                {{cat}}
                            </option>
                        </select>
                    </div>

                    <label for="kilometers">Precio</label>
                    <div class="mb-3 form-group input-group">
                        <input type="number" id="price" formControlName="price" class="form-control">
                        <span class="input-group-text">CRC</span>
                    </div>

                    <!-- FALTA: privacidad, grupos, cuentas bancarias -->

                    <ng-container *ngIf="this.message">
                        <p>
                            {{this.message}}
                        </p>
                    </ng-container>
                    <ng-container *ngIf="this.warnMessage">
                        <p class="warning">
                            {{this.warnMessage}}
                        </p>
                    </ng-container>
                    <button type="submit" class="btn btn-primary">Registrar</button>
                </form>
            </div>

        </div>
        <div id="mapDiv" class="col-md-6">
            <div id="gpx-map" style="height: 400px;" leaflet [leafletOptions]="options" [leafletLayers]="gpxLayer"
                (leafletMapReady)="onMapReady($event)">>
            </div>
        </div>

    </div>
</div>